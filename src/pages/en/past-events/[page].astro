---
import type { GetStaticPaths, Page } from 'astro';
import type { Lang } from '@i18n/types';
import PastEventsLayout from '@layouts/PastEvents.astro';
import {fetchAllPastRomajsEvents} from '@api/meetup/queries.server';
import type { MeetupEventType } from '@api/meetup/event.graqhql.types';

export interface Props {
  page: Page<MeetupEventType>;
}

const title: string = 'Past Events';
const lang: Lang = 'en';
const description = 'All past events organized by RomaJS';

export const  getStaticPaths: GetStaticPaths = async ({ paginate }) => {
  const pastEvents = await fetchAllPastRomajsEvents();

  return paginate(pastEvents, { pageSize: import.meta.env.MEETUP_PAGE_SIZE });
} 

const { page } = Astro.props;
---

<PastEventsLayout
  title={title}
  lang={lang}
  description={description}
  page={page}
/>
